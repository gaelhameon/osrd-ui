import{r as b,R as x}from"./index-RYns6xqu.js";import{c as _}from"./index-Cm1LdsEh.js";import{P as w,X as k,Y as A,S as V,O as S,z,a as M}from"./PathLayer-C7DXgddV.js";import{g as C}from"./vectors-BMNFZSin.js";/* empty css                        */import"./lodash-CcdATr5u.js";function N(p,h){const d=h-p.points[0].time;return{...p,points:p.points.map(g=>({...g,time:g.time+d}))}}const I=({enableDragPaths:p,pickingTolerance:h,enableMultiSelection:d,spaceScaleType:g})=>{const[T,Z]=b.useState(w),[e,i]=b.useState({xOffset:0,yOffset:0,xZoomLevel:k,yZoomLevel:A,selection:null,panTarget:null,hoveredPath:null});return x.createElement("div",{className:"inset-0"},x.createElement(V,{className:_("inset-0 absolute p-0 m-0",e.panTarget&&"cursor-grabbing",e.hoveredPath&&"cursor-pointer"),operationalPoints:S,spaceOrigin:0,spaceScales:S.slice(0,-1).map((a,t)=>({from:a.position,to:S[t+1].position,...g==="linear"?{size:50*e.yZoomLevel}:{coefficient:150/e.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/e.xZoomLevel,xOffset:e.xOffset,yOffset:e.yOffset,onClick:({event:a})=>{const{hoveredPath:t,selection:r,panTarget:l}=e;if(!l)if(!t)(!d||!a.ctrlKey)&&i(n=>({...n,selection:null}));else if(!r)i({...e,selection:new Set([t.index])});else if(!d||!a.ctrlKey)i({...e,selection:r.has(t.index)?null:new Set([t.index])});else{const n=new Set(r);n.has(t.index)?n.delete(t.index):n.add(t.index),i({...e,selection:n.size?n:null})}},onHoveredChildUpdate:({item:a})=>{i(t=>({...t,hoveredPath:a}))},onPan:({initialPosition:a,position:t,initialData:r,data:l,isPanning:n})=>{const{panTarget:o,hoveredPath:c,selection:y}=e,P=C(a,t);if(!n)i(s=>({...s,panTarget:null}));else if(!o&&p&&c){const s=y!=null&&y.has(c.index)?y:new Set([c.index]);i(m=>({...m,selection:s,panTarget:{type:"items",initialTimeOrigins:Array.from(s).reduce((f,u)=>({...f,[u]:T[u].points[0].time}),{})}}))}else if(!o)i(s=>({...s,panTarget:{type:"stage",initialOffset:{x:e.xOffset,y:e.yOffset}}}));else if(o.type==="stage"){const s=o.initialOffset.x+P.x,m=o.initialOffset.y+P.y;i(f=>({...f,xOffset:s,yOffset:m}))}else if(o.type==="items"){const{initialTimeOrigins:s}=o,m=l.time-r.time;Z(f=>f.map((u,v)=>s[v]?N(u,s[v]+m):u))}},onZoom:a=>{i(t=>({...t,...z(e,a)}))}},T.map((a,t)=>{var r,l,n,o,c;return x.createElement(M,{key:a.id,index:t,path:a,color:a.color,pickingTolerance:h,level:((r=e.panTarget)==null?void 0:r.type)==="items"?(l=e.selection)!=null&&l.has(t)?1:4:(n=e.selection)!=null&&n.has(t)||((o=e.hoveredPath)==null?void 0:o.index)===t?1:(c=e.selection)!=null&&c.size?3:2})})))},W={title:"SpaceTimeChart/Paths interactions",component:I,argTypes:{enableDragPaths:{name:"Enable dragging paths?",defaultValue:!0,control:{type:"boolean"}},enableMultiSelection:{name:"Multi-selection?",defaultValue:!0,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}},pickingTolerance:{name:"Picking tolerance",description:"(in pixels)",defaultValue:5,control:{type:"number",step:1,min:0,max:30}}}},O={name:"Default arguments",args:{enableDragPaths:!0,enableMultiSelection:!0,spaceScaleType:"linear",pickingTolerance:5}};var E,L,D;O.parameters={...O.parameters,docs:{...(E=O.parameters)==null?void 0:E.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    enableDragPaths: true,
    enableMultiSelection: true,
    spaceScaleType: 'linear',
    pickingTolerance: 5
  }
}`,...(D=(L=O.parameters)==null?void 0:L.docs)==null?void 0:D.source}}};const j=["DefaultArgs"];export{O as DefaultArgs,j as __namedExportsOrder,W as default};
