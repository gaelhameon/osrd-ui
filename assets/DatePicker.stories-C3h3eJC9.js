import{R as i,r as h}from"./index-RYns6xqu.js";import{b as z,c as $,W as b}from"./index.esm-Dk8PHLvH.js";import{c as w}from"./index-Cm1LdsEh.js";import{a as H,u as K}from"./useOutsideClick-CtG5jKG-.js";import{I as Z}from"./Input-BEca98am.js";/* empty css              */import"./FieldWrapper-DTvEllJF.js";import"./InputStatusIcon-COYgDJ0E.js";import"./useFocusByTab-DuF17kQm.js";const J="Invalid selectedSlot: If start and end are defined, the start date must be before the end date.",Q="Invalid selectableSlot: If start and end are defined, the start date must be before the end date.",U="selectedSlot must be within selectableSlot",X="initialDate must be within selectableSlot";function l(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function P(e){return e.start&&e.end?l(e.start).getTime()<=l(e.end).getTime():!0}function S(e,t){const a=new Date(t,e,1).getDay();if(a===1)return[];const r=a===0?6:a-1,s=new Date(t,e,0),o=[];for(let u=0;u<r;u++){const c=s.getDate()-u;o.unshift(new Date(s.getFullYear(),s.getMonth(),c))}return o}function ee(e,t){const r=(7-new Date(t,e+1,0).getDay())%7;if(r===0)return[];const s=new Date(t,e+1,1),o=[];for(let u=0;u<r;u++){const c=u+1;o.push(new Date(s.getFullYear(),s.getMonth(),c))}return o}function te(e,t){const a=new Date(t,e+1,0).getDate(),r=[];for(let s=1;s<=a;s++)r.push(new Date(t,e,s));return r}function O(e,t){return!e||!t?!1:e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function I(e,t){if(!t)return!0;const n=l(e),a=t.start?l(t.start):void 0,r=t.end?l(t.end):void 0,s=a?n>=a:!0,o=r?n<=r:!0;return s&&o}function ne(e,t){const n=[];for(let a=0;a<t;a++){const r=new Date(e);r.setMonth(e.getMonth()+a,1),n.push(new Date(r.getFullYear(),r.getMonth(),1))}return n}function C(e){if(!e)return"";const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getFullYear()).slice(-2);return`${t}/${n}/${a}`}function ae(e,t){return!t||(t==null?void 0:t.start)===null?{start:e,end:null}:t.end?{start:e,end:null}:l(e).getTime()===l(t.start).getTime()?void 0:l(e)<l(t.start)?{start:e,end:t.start}:{start:t.start,end:e}}function re(e){let t="";if(e){const{start:n,end:a}=e;if(O(n,a))t=C(n);else{let r=C(n);n&&a&&n.getFullYear()===a.getFullYear()&&(r=r.slice(0,5)),t=`${r} - ${C(a)}`}}return t}function A({value:e,isRangeMode:t}){return t?re(e):C(e)}function F({value:e,isRangeMode:t}){return t?e:e&&{start:e,end:e}}function se(e,t,n){if(e&&!P(e))throw new Error(J);if(t&&!P(t))throw new Error(Q);if(e!=null&&e.start&&(e!=null&&e.end)&&(t!=null&&t.start)&&(t!=null&&t.end)&&(l(e.start)<l(t.start)||l(e.end)>l(t.end)))throw new Error(U);if(n&&(t!=null&&t.start)&&(t!=null&&t.end)&&(l(n)<l(t.start)||l(n)>l(t.end)))throw new Error(X)}function ie({displayedMonthStartDate:e,selectableSlot:t,selectedSlot:n}){const a=(t==null?void 0:t.start)??new Date;a.setHours(0,0,0,0);const r=e.getFullYear(),s=e.getMonth(),o=te(s,r),u=S(s,r),c=ee(s,r);return{days:[...u,...o,...c],isReferenceDate:d=>l(d).getTime()===l(a).getTime(),buildDayWrapperClassName:d=>{const D=n&&O(d,n.start)||!1,E=n&&O(d,n.end)||!1,k=n&&n.start&&n.end&&I(d,n)||D||E,M=I(d,t);let f={"inside-selectable-slot":M,"outside-selectable-slot":!M,"current-month":d.getMonth()===s,past:l(d)<l(a)};return n&&(f={...f,start:D,end:E,"within-selected-slot":k}),w("day-wrapper",f)},isDateSelectable:d=>!(!I(d,t)||d.getMonth()!==s)}}const oe=["M","T","W","T","F","S","S"],ue=({date:e,isReferenceDate:t,isSelectable:n,dayWrapperClassName:a,onClick:r})=>i.createElement("div",{onClick:()=>{n&&r(e)},className:"day-background"},i.createElement("div",{className:a},i.createElement("span",{className:"day"},e.getDate()),t&&i.createElement("span",{className:"current-date-highlight"}))),B=e=>{const{displayedMonthStartDate:t,onDayClick:n}=e,{days:a,isReferenceDate:r,isDateSelectable:s,buildDayWrapperClassName:o}=ie(e);return i.createElement("div",{className:"calendar-wrapper"},i.createElement("div",{className:"calendar-anatomy"},i.createElement("p",{className:"calendar-month-label"},t.toLocaleString("en-GB",{month:"short"})),i.createElement("div",{className:"calendar-grid-wrapper"},i.createElement("div",{className:"calendar-weekday-labels"},oe.map((u,c)=>i.createElement("p",{key:c},u))),i.createElement("div",{className:"calendar-days-grid"},a.map((u,c)=>i.createElement(ue,{key:c,date:u,isReferenceDate:r(u),isSelectable:s(u),dayWrapperClassName:o(u),onClick:n}))))))};B.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{selectedSlot:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  start: Date | null;
  end: Date | null;
}`,signature:{properties:[{key:"start",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}},{key:"end",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}}]}},description:""},selectableSlot:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  start: Date | null;
  end: Date | null;
}`,signature:{properties:[{key:"start",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}},{key:"end",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}}]}},description:""},displayedMonthStartDate:{required:!0,tsType:{name:"Date"},description:""},onDayClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""}}};function ce({initialDate:e,selectedSlot:t,selectableSlot:n,numberOfMonths:a=1}){se(t,n,e);const r=e??(t==null?void 0:t.start)??(n==null?void 0:n.start)??new Date,[s,o]=h.useState(r),u=ne(s,a),c=s.getFullYear(),m=s.getMonth(),y=new Date(c,m,1),g=new Date(c,m+1,0),d=n===void 0||n.start===null?!0:n.start<y,D=n===void 0||n.end===null?!0:n.end>g;return{displayedMonthsStartDates:u,showNavigationBtn:d||D,canGoToPreviousMonth:d,canGoToNextMonth:D,handleGoToPreviousMonth:()=>{if(d){const f=m===0?11:m-1,p=m===0?c-1:c;o(new Date(p,f,1))}},handleGoToNextMonth:()=>{if(D){const f=m===11?0:m+1,p=m===11?c+1:c;o(new Date(p,f,1))}}}}const j=({initialDate:e,selectedSlot:t,selectableSlot:n,numberOfMonths:a=1,onDayClick:r,modalPosition:s,calendarPickerRef:o})=>{const{displayedMonthsStartDates:u,showNavigationBtn:c,canGoToNextMonth:m,canGoToPreviousMonth:y,handleGoToNextMonth:g,handleGoToPreviousMonth:d}=ce({initialDate:e,selectedSlot:t,selectableSlot:n,numberOfMonths:a});return i.createElement("div",{ref:o,className:"calendar-picker",style:s},c&&i.createElement("span",{className:w("calendar-navigation-btn","previous",{disabled:!y}),onClick:d},i.createElement(z,{size:"lg"})),i.createElement("div",{className:w("calendar-list",{"navigation-btn-hidden":!c})},u.map((D,E)=>i.createElement(B,{key:E,displayedMonthStartDate:D,selectableSlot:n,selectedSlot:t,onDayClick:r}))),c&&i.createElement("span",{className:w("calendar-navigation-btn","next",{disabled:!m}),onClick:g},i.createElement($,{size:"lg"})))};j.__docgenInfo={description:"",methods:[],displayName:"CalendarPicker",props:{selectedSlot:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  start: Date | null;
  end: Date | null;
}`,signature:{properties:[{key:"start",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}},{key:"end",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}}]}},description:""},onDayClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(day: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"day"}],return:{name:"void"}}},description:""},modalPosition:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  top: number;
  left: number;
}`,signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:""},calendarPickerRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},initialDate:{required:!1,tsType:{name:"Date"},description:""},numberOfMonths:{required:!1,tsType:{name:"union",raw:"1 | 2 | 3",elements:[{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"}]},description:"",defaultValue:{value:"1",computed:!1}},selectableSlot:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  start: Date | null;
  end: Date | null;
}`,signature:{properties:[{key:"start",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}},{key:"end",value:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}],required:!0}}]}},description:""}}};const de=-24,le=3;function me(e){const{inputProps:t,value:n,isRangeMode:a,onDateChange:r}=e,[s,o]=h.useState(!1),[u,c]=h.useState(A(e)),[m,y]=h.useState(F(e)),g=h.useRef(null),d=h.useRef(null);H(g,f=>{var p;d.current&&((p=d.current.parentElement)!=null&&p.contains(f.target))||o(!1)});const{calculatePosition:D,modalPosition:E}=K(d,g,le,de),k=f=>{var p;o(!0),(p=t.onClick)==null||p.call(t,f)},M=f=>{if(a){const p=ae(f,n);r(f,p)}else r(f)};return h.useEffect(()=>{s&&D()},[s,D]),h.useEffect(()=>{c(A(e)),y(F(e))},[n]),{showPicker:s,inputValue:u,selectedSlot:m,modalPosition:E,inputRef:d,calendarPickerRef:g,setShowPicker:o,handleDayClick:M,handleInputClick:k}}const R=e=>{const{inputValue:t,selectedSlot:n,showPicker:a,modalPosition:r,inputRef:s,calendarPickerRef:o,setShowPicker:u,handleDayClick:c,handleInputClick:m}=me(e),{inputFieldWrapperClassname:y,...g}=e.inputProps;return i.createElement("div",{className:"date-picker"},i.createElement("div",null,i.createElement(Z,{...g,ref:s,value:t,onClick:m,type:"text",trailingContent:{content:i.createElement(b,null),onClickCallback:()=>u(!a)},inputFieldWrapperClassname:w("date-picker-input",y),autoComplete:"off"})),a&&i.createElement("div",{className:"calendar-picker-wrapper"},i.createElement(j,{...e.calendarPickerProps,selectedSlot:n,onDayClick:c,modalPosition:r,calendarPickerRef:o})))};R.__docgenInfo={description:"",methods:[],displayName:"DatePicker"};const v=new Date,_=new Date(v);_.setMonth(_.getMonth()+3);const L=new Date(v);L.setDate(L.getDate()+5);const fe={start:v,end:_},De={start:v,end:L},pe=e=>{const[t,n]=h.useState(e.value),a=(s,o)=>n(o),r=s=>n(s);return e.isRangeMode?i.createElement(R,{...e,value:t,onDateChange:a}):i.createElement(R,{...e,value:t,onDateChange:r})},Ne={component:R,decorators:[e=>i.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},i.createElement(e,null))],parameters:{docs:{story:{height:"500px"}}},args:{calendarPickerProps:{numberOfMonths:1,selectableSlot:fe},inputProps:{id:"date-picker",label:"Select a date"}},render:e=>i.createElement(pe,{...e}),title:"core/DatePicker",tags:["autodocs"]},T={args:{isRangeMode:!1,value:v}},N={args:{isRangeMode:!0,value:De}};var q,x,W;T.parameters={...T.parameters,docs:{...(q=T.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    isRangeMode: false,
    value: now
  }
}`,...(W=(x=T.parameters)==null?void 0:x.docs)==null?void 0:W.source}}};var V,Y,G;N.parameters={...N.parameters,docs:{...(V=N.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    isRangeMode: true,
    value: rangeSelectedSlot
  }
}`,...(G=(Y=N.parameters)==null?void 0:Y.docs)==null?void 0:G.source}}};const Ce=["Single","Range"];export{N as Range,T as Single,Ce as __namedExportsOrder,Ne as default};
