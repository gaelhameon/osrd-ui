import{r as f,R as t}from"./index-RYns6xqu.js";import{c as h}from"./index-Cm1LdsEh.js";import{l as g}from"./lodash-CcdATr5u.js";import{X as k,Y as L,S as v,O as p,z as b,P as D,a as M,b as x,M as C,W as P}from"./PathLayer-C7DXgddV.js";import{g as _}from"./vectors-BMNFZSin.js";const w=({p1:a,p2:e})=>t.createElement("svg",{width:"100%",height:"100%"},t.createElement("line",{x1:a.x,y1:a.y,x2:e.x,y2:e.y,stroke:"black",strokeWidth:"2",strokeDasharray:"5, 5"}));function Z(a){const e=a.getTime(),o=e>=0?"+":"-";let s=Math.abs(e);const n=Math.floor(s/(1e3*60*60));s-=n*1e3*60*60;const i=Math.floor(s/(1e3*60));let l=o;return n>0&&(l+=`${n} hour${n>1?"s":""}`),i>0&&(n>0&&(l+=" "),l+=`${i} minute${i>1?"s":""}`),l.trim()}const T=({data:a,position:e,isDiff:o,marginTop:s=0})=>t.createElement("div",{style:{position:"absolute",top:e.y+s,left:e.x,whiteSpace:"nowrap",background:P,fontSize:"0.7em"}},o?t.createElement(t.Fragment,null,t.createElement("div",null,"Time difference: ",Z(new Date(a.time))),t.createElement("div",null,"Distance to mark: ",g.round(a.position).toLocaleString()," m")):t.createElement(t.Fragment,null,t.createElement("div",null,"Time: ",new Date(a.time).toLocaleTimeString()),t.createElement("div",null,"Distance: ",g.round(a.position).toLocaleString()," m"))),A=({reference:a})=>{const{getPoint:e}=f.useContext(x),{position:o,data:s,isHover:n}=f.useContext(C);return n?t.createElement(t.Fragment,null,!!a&&t.createElement(w,{p1:o,p2:e(a)}),t.createElement(T,{data:a?{position:s.position-a.position,time:s.time-a.time}:s,position:o,isDiff:!!a,marginTop:30})):null},z=({data:a})=>{const{getPoint:e}=f.useContext(x),o=e(a);return t.createElement("div",null,t.createElement("div",{style:{position:"absolute",top:o.y,left:o.x,width:3,height:3,margin:"-1 -1",background:"black"}}),t.createElement(T,{data:a,position:o,marginTop:5}))},N=({spaceScaleType:a})=>{var s;const[e,o]=f.useState({xOffset:0,yOffset:0,xZoomLevel:k,yZoomLevel:L,panTarget:null,mark:null});return t.createElement("div",{className:"inset-0"},t.createElement(v,{className:h("inset-0 absolute overflow-hidden p-0 m-0",e.panTarget&&"cursor-grabbing"),operationalPoints:p,spaceOrigin:0,spaceScales:p.slice(0,-1).map((n,i)=>({from:n.position,to:p[i+1].position,...a==="linear"?{size:50*e.yZoomLevel}:{coefficient:150/e.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/e.xZoomLevel,xOffset:e.xOffset,yOffset:e.yOffset,onClick:({data:n})=>{e.panTarget||o({...e,mark:e.mark?null:{data:n}})},onPan:({initialPosition:n,position:i,isPanning:l})=>{const{panTarget:m}=e,u=_(n,i);if(!l)o(r=>({...r,panTarget:null}));else if(!m)o(r=>({...r,panTarget:{type:"stage",initialOffset:{x:r.xOffset,y:r.yOffset}}}));else if(m.type==="stage"){const r=m.initialOffset.x+u.x,O=m.initialOffset.y+u.y;o(S=>({...S,xOffset:r,yOffset:O}))}},onZoom:n=>{o(i=>({...i,...b(e,n)}))}},D.map((n,i)=>t.createElement(M,{key:n.id,index:i,path:n,color:n.color})),t.createElement(A,{reference:(s=e.mark)==null?void 0:s.data}),e.mark&&t.createElement(z,{data:e.mark.data})))},R={title:"SpaceTimeChart/Measuring times and distances",component:N,argTypes:{spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},c={name:"Default arguments",args:{spaceScaleType:"linear"}};var d,y,E;c.parameters={...c.parameters,docs:{...(d=c.parameters)==null?void 0:d.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    spaceScaleType: 'linear'
  }
}`,...(E=(y=c.parameters)==null?void 0:y.docs)==null?void 0:E.source}}};const V=["DefaultArgs"];export{c as DefaultArgs,V as __namedExportsOrder,R as default};
