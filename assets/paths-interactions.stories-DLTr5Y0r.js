import{r as v,R as x}from"./index-RYns6xqu.js";import{c as L}from"./index-Cm1LdsEh.js";import{P as b,X as D,Y as Z,S as _,O as h,z as w,a as A}from"./PathLayer-B_O64oKG.js";import{g as V}from"./vectors-BiytCEVh.js";/* empty css                        */import"./lodash-CcdATr5u.js";import"./chroma-CVOSM3bD.js";function k(f,O){const u=O-f.points[0].time;return{...f,points:f.points.map(g=>({...g,time:g.time+u}))}}const z=({enableDragPaths:f,pickingTolerance:O,enableMultiSelection:u,spaceScaleType:g})=>{const[S,E]=v.useState(b),[e,s]=v.useState({xOffset:0,yOffset:0,xZoomLevel:D,yZoomLevel:Z,selection:null,panTarget:null,hoveredPath:null});return x.createElement("div",{className:"inset-0"},x.createElement(_,{className:L("inset-0 absolute p-0 m-0",e.panTarget&&"cursor-grabbing",e.hoveredPath&&"cursor-pointer"),operationalPoints:h,spaceOrigin:0,spaceScales:h.slice(0,-1).map((a,t)=>({from:a.position,to:h[t+1].position,...g==="linear"?{size:50*e.yZoomLevel}:{coefficient:150/e.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/e.xZoomLevel,xOffset:e.xOffset,yOffset:e.yOffset,onClick:({event:a})=>{const{hoveredPath:t,selection:l,panTarget:r}=e;if(!r)if(!t)(!u||!a.ctrlKey)&&s(n=>({...n,selection:null}));else if(!l)s({...e,selection:new Set([t.index])});else if(!u||!a.ctrlKey)s({...e,selection:l.has(t.index)?null:new Set([t.index])});else{const n=new Set(l);n.has(t.index)?n.delete(t.index):n.add(t.index),s({...e,selection:n.size?n:null})}},onHoveredChildUpdate:({item:a})=>{s(t=>({...t,hoveredPath:a}))},onPan:({initialPosition:a,position:t,initialData:l,data:r,isPanning:n})=>{const{panTarget:o,hoveredPath:c,selection:y}=e,T=V(a,t);if(!n)s(i=>({...i,panTarget:null}));else if(!o&&f&&c){const i=y!=null&&y.has(c.index)?y:new Set([c.index]);s(p=>({...p,selection:i,panTarget:{type:"items",initialTimeOrigins:Array.from(i).reduce((m,d)=>({...m,[d]:S[d].points[0].time}),{})}}))}else if(!o)s(i=>({...i,panTarget:{type:"stage",initialOffset:{x:e.xOffset,y:e.yOffset}}}));else if(o.type==="stage"){const i=o.initialOffset.x+T.x,p=o.initialOffset.y+T.y;s(m=>({...m,xOffset:i,yOffset:p}))}else if(o.type==="items"){const{initialTimeOrigins:i}=o,p=r.time-l.time;E(m=>m.map((d,P)=>i[P]?k(d,i[P]+p):d))}},onZoom:a=>{s(t=>({...t,...w(e,a)}))}},S.map((a,t)=>{var l,r,n,o,c;return x.createElement(A,{key:a.id,index:t,path:a,color:a.color,pickingTolerance:O,level:((l=e.panTarget)==null?void 0:l.type)==="items"?(r=e.selection)!=null&&r.has(t)?1:4:(n=e.selection)!=null&&n.has(t)||((o=e.hoveredPath)==null?void 0:o.index)===t?1:(c=e.selection)!=null&&c.size?3:2})})))},X={title:"SpaceTimeChart/Paths interactions",component:z,argTypes:{enableDragPaths:{name:"Enable dragging paths?",defaultValue:!0,control:{type:"boolean"}},enableMultiSelection:{name:"Multi-selection?",defaultValue:!0,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}},pickingTolerance:{name:"Picking tolerance",description:"(in pixels)",defaultValue:5,control:{type:"number",step:1,min:0,max:30}}}},Y={name:"Default arguments",args:{enableDragPaths:!0,enableMultiSelection:!0,spaceScaleType:"linear",pickingTolerance:5}},U=["DefaultArgs"];export{Y as DefaultArgs,U as __namedExportsOrder,X as default};
